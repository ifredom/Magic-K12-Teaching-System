# 数据建表

> 建表前缀规则，保持与若依一致。 模块划分规则与 `ruoyi-vue` 一致 

1. 数据库名称: `magick12`
2. 用户系统相关表,统一前缀: `sys_`
3. 定时任务相关表，统一前缀：`qrtz_`
4. 业务相关表，统一前缀：`mt_`
5. 逻辑删除字段: `del_flag`

## 设计步骤

> 基于flyway进行建表

1. 用户表

## 模块设计

> 模块说明:

| 模块名称         | 内容             |
| --------------- |----------------|
| magic-admin     | 业务服务模块         |
| magic-common    | 通用模块           |
| magic-quartz    | 定时任务           |
| magic-system    | 用户模块，角色权限，系统设置 |

`ruoyi-vue`模块设计:

| 模块名称        | 更新内容                          |
| --------------- | ---------------------------------|
| ruoyi-admin     | 优化无用户编号不校验数据权限       |
| ruoyi-common    | 支持自定义显示Excel属性列          |
| ruoyi-framework | 操作日志记录DELETE请求参数(IAMV6F) |
| ruoyi-generator | 修复码生成上级菜单显示问题(19CTU)   |
| ruoyi-quartz    | 修改时间范围日期格式               |
| ruoyi-system    | 修改时间范围日期格式               |
| ruoyi-ui        | 校检文件名是否包含特殊字符         |



## flowway

```xml
<dependency>
    <groupId>org.flywaydb</groupId>
    <artifactId>flyway-core</artifactId>
    <version>8.5.13</version>
</dependency>
```
```yml
spring:
  # 数据库连接配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/user_test?characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: 123456
  flyway:
    # 是否启用，默认为true
    enabled: true
    # 编码格式，默认UTF-8
    encoding: UTF-8
    # sql脚本存放路径，默认db/migration
    locations: classpath:db/migration
    # sql脚本文件名前缀，默认V
    sql-migration-prefix: V
    # sql脚本文件名分隔符，默认双下划线__
    sql-migration-separator: __
    # sql脚本文件名称的后缀，默认.sql
    sql-migration-suffixes: .sql
    # 迁移时是否进行校验，确保历史脚本未篡改，默认true
    validate-on-migrate: true
    # 当迁移发现数据库非空且存在没有元数据的表时，自动执行基准迁移，新建schema_version表
    baseline-on-migrate: true
```
### 参考阅读

- flyway
