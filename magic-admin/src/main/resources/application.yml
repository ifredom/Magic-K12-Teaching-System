spring:
    application:
        name: magic-java-server

    profiles:
        active: dev

    main:
        allow-circular-references: true # 允许循环依赖，因为项目是三层架构，无法避免这个情况。

    # Servlet 配置
    servlet:
        # 文件上传相关配置项
        multipart:
            max-file-size: 16MB # 单个文件大小
            max-request-size: 32MB # 设置总上传的文件大小

    cache:
        type: redis
        redis:
            time-to-live: 1h # 设置过期时间为 1 小时
    #        cache:
    #            # 缓存类型，默认为 ehcache
    #            type: redis
    #            redis:
    #                time-to-live: 1h # 设置过期时间为 1 小时

    # redis 配置
    redis:
        host: localhost
        port: 6379
        password: # 如果Redis服务器设置了密码，请在这里填写
        database: 0 # 数据库索引

    #  swagger文档配置
    mvc:
        static-path-pattern: /**
        pathmatch:
            matching-strategy: ant_path_matcher
    web:
        resources:
            static-locations: classpath:/static/ # 静态资源文件路径配置，多个路径用逗号分隔。优先级从上到下。
server:
    servlet:
        encoding:
            enabled: true
            charset: UTF-8 # 必须设置 UTF-8，避免 WebFlux 流式返回乱码问题
            force: true

logging:
    level:
        root: error
        org.springframework: info
        org.springframework.security: debug


#################### mybatis-plus配置 ####################

mybatis-plus:
    mapper-locations: classpath:mapper/**/*.xml
    type-aliases-package: com.magic.module.*.entity
    global-config:
        db-config:
            id-type: auto
            table-prefix: t_
            logic-delete-value: 1
            logic-not-delete-value: 0
    configuration:
        map-underscore-to-camel-case: true


#################### magic server 项目通用配置 ##########
magic:
    storage:
        aliyun:
            enabled: false # 是否启用阿里云OSS存储
        local:
            enabled: true # 是否启用本地OSS存储
    ecsFilePath: /data/web/dist/h5games/  # ECS存储
    lock:
        type: redis # 锁类型，支持 redis、mysql
